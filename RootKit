#include <ntddk.h>

void SampleUnload(_In_ PDRIVER_OBJECT DriverObject)
{
	UNREFERENCED_PARAMETER(DriverObject);
	KdPrint(("Sample driver Unload called \n"));

}

extern "C"

NTSTATUS DriverEntry(_In_ PDRIVER_OBJECT DriverObject, _In_ PUNICODE_STRING RegistryPath)
{
	UNREFERENCED_PARAMETER(RegistryPath);
	DriverObject->DriverUnload = SampleUnload;

	KdPrint(("Sample Driver initilized sucessfully"));
	return STATUS_SUCCESS;
}


c:> sc create sample type = kernel binPath = c:\sanjay\rootkit\ sample.sys

Check in registery : HKLM\ System\ CurrentControlSet\ Services\ Sample.

sc start sample

if error -> bcdedit /set testsigning on 
restart


open Process Explorer -> search sample.sys

sc stop sample


for Dbgprint use 
Youâ€™ll have to add a key named Debug Print Filter under HKLM\ SYSTEM\ CurrentControlSet\ Control\ Session Manager

c:>DbgView.exe


