//Test-02.c
//Authot: SDB
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <conio.h> // For getch() function

#define MAX_PASSWORD_LENGTH 12 // Maximum password length (excluding null terminator)


// NEW FUNCTION ADDED HZERE :) 
// Function to right shift the password
void rightShift(char password[]) {
    int i;
    for (i = 0; i < strlen(password); i++) {
        if (password[i] >= 'A' && password[i] <= 'Z') {
            password[i] += 1;
            if (password[i] > 'Z') {
                password[i] = 'A';
            }
        } else if (password[i] >= 'a' && password[i] <= 'z') {
            password[i] += 1;
            if (password[i] > 'z') {
                password[i] = 'a';
            }
        }
    }
    printf("\n%s",password);
}



int main(void) {
    char password[] = "CCAGZKDQZN"; // Left-shifted password to compare against
    char recvpassword[MAX_PASSWORD_LENGTH + 1]; // Array to store received password
    char ch; // Variable to store each character read from user input
    int i = 0; // Index for tracking current position in recvpassword array

    // Right shift the left-shifted password
    rightShift(password);

    printf("\n Enter Password : ");

    // Loop to read password character by character without echoing to the screen
    while (1) {
        ch = getch(); // Read character without echoing to the screen

        // Check for Enter key to terminate input
        if (ch == '\r' || ch == '\n') {
            recvpassword[i] = '\0'; // Null-terminate the string
            break;
        } 
        // Check for Backspace key to handle character deletion
        else if (ch == '\b' && i > 0) {
            printf("\b \b"); // Erase the character from the screen
            i--;
        } 
        // Store the character in recvpassword if it's not a special key (like Backspace)
        else if (i < MAX_PASSWORD_LENGTH) {
            recvpassword[i] = ch;
            printf("*"); // Print asterisk (*) instead of the actual character
            i++;
        }
    }

    // Check if received password matches the decrypted password
    if (strcmp(password, recvpassword) == 0) {
        printf("\n Welcome ... ");
        // startapplication(); // Give access and start the application
    } else {
        printf("\n Access Denied !!! ");
        printf("\a\a\a\a\a\a\a"); // Sound alert to indicate access denied
        exit(1);
    }

    return 0;
} 
